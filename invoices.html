<!DOCTYPE html>
<html>
<head>
    <title>Invoices</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

    <script type="text/javascript">
        function submitForm() {

            var form = "?";
            form += $('form').serialize();
            console.log(form);

            $.ajax($('#content form').attr('action') + form, {
                type: "GET",
                data: "",
                success: function(data)
                {
                    console.log(data);
                },
                error: function(a, b, c)
                {
                    console.log(a + ", " + b + ", " + c);
                }
            })
        }

        function getValueBoxes(operation) {
            console.log("I'm here!");
            var valueBoxes = "";
            if(operation == "range") {
                valueBoxes +=("<label>From: </label>");
                valueBoxes +=('<input name="value[]" type="text">');

                valueBoxes +=("   <label>To: </label>");
                valueBoxes +=('<input name="value[]" type="text">');
            }
            else if(operation != "min" && operation != "max") {
                valueBoxes +=('<label>Search for</label>');
                valueBoxes +=('<input name="value[]" type="text">');
            }

            return valueBoxes;
        }

        function getOperation() {
                var op = "";
                op = $( "#op option:selected" ).val();
                
                $( "#queryBoxes" ).html( getValueBoxes(op) );
        }

    </script>

</head>
<body>

<div id="header">
    <h1>Invoices</h1>
    <h2>Search and details</h2>
</div>

<div id="menu">
    <ul>
        <li><a href="invoices.html">Invoices</a></li>
        <li><a href="">Customers</a></li>
        <li><a href="">Products</a></li>
    </ul>
</div>

<div id="content">
    <form action="./api/searchInvoicesByField.php" method="GET">
        <label for="op">Operation</label>
        <select id="op" name="op" onchange="getOperation()">
            <option value="" disabled selected style="display:none;">Please select one</option>
            <option value="range">Between</option>
            <option value="equal">Equals to</option>
            <option value="contains">Contains</option>
            <option value="min">Minimum</option>
            <option value="max">Maximum</option>
        </select><br><br>

        <div id="queryBoxes"></div><br>

        <label for="field">Field</label>
        <select id="field" name="field">
            <option value="invoiceNo">Invoice Number</option>
            <option value="invoiceDate">Invoice Date</option>
            <option value="companyName">Company Name</option>
            <option value="taxPayable">Tax payable</option>
            <option value="netTotal">Net Total</option>
            <option value="grossTotal">Gross total</option>
        </select><br>


        <input type="button" value="Submit" onclick="submitForm(); return false;">
    </form>
</div>

</body>
</html>