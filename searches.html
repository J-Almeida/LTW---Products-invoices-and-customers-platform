<!DOCTYPE html>
<html>
<head>
    <title>{{title}}</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/ico" href="favicon.ico"/>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="searches.js"></script>

    <script type="text/javascript">
        /*  // example
         var fieldNames = {
         "invoiceNo" : "Invoice Number",
         "invoiceDate": "Invoice Date",
         "grossTotal": "Gross Total",
         "companyName": "Company Name"};
         */
        var fieldNames = { {{tableFields}} };
        var read = 0;
        var write = 0;
        var promote = 0;

        $.get('api/getPermissions.php', function ( data ) {
            if(data != "none") {
                var permissions = JSON.parse(data);
                read = permissions.read;
                write = permissions.write;
                promote = permissions.promote;
            }
        });
    </script>

</head>
<body>

<div id="header">
    <h1>{{title}}</h1>
    <h2>Search and details</h2>
</div>

<div id="menu">
    <ul>
        <li><a href="index.php">Home</a></li>
        <li><a href="invoices.php">Invoices</a></li>
        <li><a href="customers.php">Customers</a></li>
        <li><a href="products.php">Products</a></li>
        <li><a href="users.php">Users</a></li>
    </ul>

    <div class="login">
        {{loginForm}}
    </div>
</div>

<div id="searchMenu">
    <form action="./api/search{{title}}ByField.php" method="GET" autocomplete="off">
        <ul>
            <li id="operationSelect" >
                <label for="op">Operation</label>
                <select id="op" name="op" onchange="updateValueBoxes()">
                    <option value="" disabled selected style="display:none;">Please select one</option>
                    <option value="listall">List all</option>
                    <option value="range">Between</option>
                    <option value="equal">Equals to</option>
                    <option value="contains">Contains</option>
                    <option value="min">Minimum</option>
                    <option value="max">Maximum</option>
                </select>
            </li>

            <li id="fieldSelect" >
                <label for="field">Field</label>
                <select id="field" name="field" onchange="updateValueBoxes()">
                    {{searchFields}}
                </select>
            </li>

            <li id="valueBoxes">
                <script>
                    $(this).keypress(function(e) {
                        if (e.keyCode == '13') {
                            e.preventDefault();
                            submitForm();
                        }
                    });
                </script>
            </li>
        </ul>
        
        <div id="submitButton">
            <input type="button" value="Submit" onclick="submitForm(); return false;">
        </div>

    </form>
</div>

<div id="content">
    <div id="results"></div>
</div>

</body>
</html>